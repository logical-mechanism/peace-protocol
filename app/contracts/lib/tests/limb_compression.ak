//// Copyright (C) 2025 Logical Mechanism LLC
//// SPDX-License-Identifier: GPL-3.0-only
////

use limb_compression.{limbs_match_g1_point}

test test_limb_compression() {
  let v =
    #"821285b97f9c0420a2d37951edbda3d7c3ebac40c6f194faa0256f6e569eba49829cd69c27f1dd9df2dd83bac1f5aa49"

  let x_limbs: List<Int> =
    [
      17500288565172873801, 9411633287470898589, 11539752139897092681,
      14117566851138557178, 11732854847018214359, 149328769413022752,
    ]

  let y_limbs: List<Int> =
    [
      12743184510663640417, 3586972869393599483, 1162853564816257447,
      13963573845061158233, 8519358064772266323, 300849905542043934,
    ]

  limbs_match_g1_point(v, x_limbs, y_limbs)
}

test test_complete_compression() {
  let v =
    #"821285b97f9c0420a2d37951edbda3d7c3ebac40c6f194faa0256f6e569eba49829cd69c27f1dd9df2dd83bac1f5aa49"

  let w0 =
    #"a1588e31d17d31785a4ce1a882ca92a3f1bbb7fdd9953398ff53fca38ade891c075f9e7eefc9d1396298c6f680539c69"

  let w1 =
    #"8ac69bdd182386def9f70b444794fa6d588182ddaccdffc26163fe415424ec374c672dfde52d875863118e6ef892bbac"

  let public_integers =
    [
      17500288565172873801, 9411633287470898589, 11539752139897092681,
      14117566851138557178, 11732854847018214359, 149328769413022752,
      12743184510663640417, 3586972869393599483, 1162853564816257447,
      13963573845061158233, 8519358064772266323, 300849905542043934,
      7104647174194175081, 531317549079056697, 18398326682078316828,
      17418718284690568088, 6506823675508593315, 96983736607650168,
      8432226084900007735, 5235044846752215991, 6273261425546858814,
      10840774659462574510, 1798301395639797391, 1136440148908638917,
      7138643491626859436, 5505419637978662744, 7017732200911399991,
      6377522435931897794, 18011877622578215533, 776479359663048414,
      10288726997180865397, 18352781759426245713, 17860951621094200122,
      3645999937606863567, 7588265706522355601, 337242724379907695,
    ]
  limb_compression.verify_limb_compression(v, w0, w1, public_integers)
}
