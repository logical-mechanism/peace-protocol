# .env (bash)

# Network: "local", "preprod", or "mainnet"
NETWORK="preprod"

# Find directory this file lives in
ENV_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Derive cardano-cli network flag
case "${NETWORK}" in
  local)   network="--testnet-magic 42" ;;
  preprod) network="--testnet-magic 1" ;;
  mainnet) network="--mainnet" ;;
  *)       echo "Unknown NETWORK: ${NETWORK}"; exit 1 ;;
esac

# Load network-specific config
CONFIG_JSON="${ENV_DIR}/config.${NETWORK}.json"
if [ ! -f "$CONFIG_JSON" ]; then
  echo "Missing config: ${CONFIG_JSON}"
  exit 1
fi

# path to cardano-cli
cli=$(jq -r '.path_to_cardano_cli' "$CONFIG_JSON")

# path to a node socket
socket=$(jq -r '.path_to_node_socket' "$CONFIG_JSON")

export CARDANO_NODE_SOCKET_PATH="$socket"
